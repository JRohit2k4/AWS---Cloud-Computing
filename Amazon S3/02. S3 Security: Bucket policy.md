**Amazon S3 - Security**  

Amazon S3 security is based on who can access the bucket or objects and under what conditions. Security is enforced using policies, ACLs, and encryption.

---

**1. User-Based Security (IAM Policies)**
- Uses IAM Policies attached to:
  - IAM users
  - IAM groups
  - IAM roles
- Defines which S3 API actions (like ```GetObject```, ```PutObject```) are allowed or denied
- Commonly used when:
  - An IAM user need to access to S3
  - An EC2 Instance accesses S3 using an IAM role
- Example
  - IAM user -> IAM policy -> access S3 object
 
 ---

 **2. Resource-Based Security (Bucket Policies)**
- Uses S3 Bucket Policies
- Policies are attached directly to the S3 bucket
- Written in JSON
- Can:
  - Allow  public access
  - Allow cross-account access
  - Enforce encrypption on uploads
- Bucket policies are now th most common and recommended way to secure S3

---

**3. Access Control List (ACLs)**
- Object ACLs
  - Fine-grained permissions at object level
  - Can be disabled
- Bucket ACLs
  - Less commonly used
  - Can also be disabled
- AWS recommends using Bucket Policies instead of ACLs

---

**4. When Can an IAM Principal Access an S3 Object?**
An IAM principal (user, role, service) can access an S3 object only if:
- IAM perission allow the action
  **OR**
- Bucket (resource) policy allows the action
- There is no explicit DENY
**Explicit DENY always overrides the action**

---

**5. S3 Bucket Policy Structure**
S3 Bucket Policies are JSON-based and include:
- Resources
  - Specifies which bucket or objects the policy applies to
- Effect
  - ```Allow``` or ```Deny```
- Action
  - S3 API calls (e.g. ```s3:GetObject```)
- Principal
  - Who the policy appies to (```*``` means anyone)

**Public Bucket Example**
- ```Principal```: "*"
- ```Action: s3GetObject```
- Allows anyone on internet to read objects in the bucket  
**This is how public S3 buckets are created.**

---

**6. Common Access Scenarios**   
**Public Access**
- Use Bucket policy
- Allow website visitors to access objects

---

**7. Block Public Access**
- Extra security layer added by AWS
- Prevents accidental public exposure
- Even if:
  - Bucket policy allows public access
  - Block Public Access = bucket stays private

**Levels:**
- Bucket level
- Account level

Best practice:
- Keep Block Public Access enabled unless public access is required

---

**8Ô∏è. Encryption (Mentioned in Security)**
- S3 supports object encryption
- Can enforce encryption using Bucket Policies
- Protects data at rest

---

**One-Line Exam Tip**  

**S3 security is controlled using IAM policies (user-based), Bucket policies (resource-based), ACLs (legacy), encryption, and Block Public Access settings.**
